import{S as R,i as U,s as F,e as b,c as w,a as I,d as _,f as M,J as K,j as V,t as B,l as O,g as j,b as E,K as te,I as g,L as W,h as ie,M as ce,N as fe,v as z,w as G,x as J,y as ue,z as de,p as P,n as C,A as Q,O as ne,m as se,o as re,P as he,B as ge,k as le,Q as _e,u as pe}from"../chunks/vendor-9e365313.js";function me(s){if(!s)return[];const e=new DOMParser().parseFromString(s,"text/html").getElementsByTagName("body")[0];function t(r,o=[]){let i=[];if(r.tagName==="A"||r.tagName==="IMG"||r.tagName==="TABLE")return[{tags:o,text:r.outerHTML,type:"html"}];if(r.childNodes.length){for(const a of r.childNodes)i=i.concat(t(a,[...o,...r.tagName==="BODY"?[]:[r.tagName]]));return i}if(r.nodeName==="#text")for(const a of r.textContent.split(/\s/))i.push({tags:o,text:a,type:"word"});return i.filter(a=>a.text.length)}return t(e)}function ve(s){let n;return{c(){n=b("div")},l(e){n=w(e,"DIV",{});var t=I(n);t.forEach(_)},m(e,t){M(e,n,t),n.innerHTML=s[0]},p(e,[t]){t&1&&(n.innerHTML=e[0])},i:K,o:K,d(e){e&&_(n)}}}function be(s,n,e){let t,{text:l=""}=n,{tags:r=[]}=n,{type:o=""}=n;function i(a,p,c){var m;let f;if(c==="word"){const v=~~((a.length+1)/3)+1,x=a.substring(0,v),u=(m=a[v])!=null?m:"",N=a.substring(v+1,a.length);f=`${x}<span class="center">${u}</span>${N}`}else f=a;const y=p.map(v=>`<${v}>`).join(""),S=p.map(v=>`</${v}>`).join("");return`${y}${f}${S}`}return s.$$set=a=>{"text"in a&&e(1,l=a.text),"tags"in a&&e(2,r=a.tags),"type"in a&&e(3,o=a.type)},s.$$.update=()=>{s.$$.dirty&14&&e(0,t=i(l,r,o))},[t,l,r,o]}class we extends R{constructor(n){super();U(this,n,be,ve,F,{text:1,tags:2,type:3})}}function ye(s){let n,e,t,l,r=(s[0]/s[1]*100).toFixed(2)+"",o,i,a,p;return{c(){n=b("div"),e=b("div"),t=V(),l=b("div"),o=B(r),i=B("%"),this.h()},l(c){n=w(c,"DIV",{class:!0});var f=I(n);e=w(f,"DIV",{class:!0,style:!0}),I(e).forEach(_),t=O(f),l=w(f,"DIV",{class:!0});var y=I(l);o=j(y,r),i=j(y,"%"),y.forEach(_),f.forEach(_),this.h()},h(){E(e,"class","progressBar svelte-1kig4jp"),te(e,"width",s[3]*100+"%"),E(l,"class","progressText svelte-1kig4jp"),E(n,"class","wrapper svelte-1kig4jp")},m(c,f){M(c,n,f),g(n,e),g(n,t),g(n,l),g(l,o),g(l,i),s[5](n),a||(p=W(n,"click",s[4]),a=!0)},p(c,[f]){f&8&&te(e,"width",c[3]*100+"%"),f&3&&r!==(r=(c[0]/c[1]*100).toFixed(2)+"")&&ie(o,r)},i:K,o:K,d(c){c&&_(n),s[5](null),a=!1,p()}}}function ke(s,n,e){let t;const l=ce();let{index:r=0}=n,{total:o=0}=n,i;function a(c){const f=c.offsetX/i.clientWidth;l("change",f)}function p(c){fe[c?"unshift":"push"](()=>{i=c,e(2,i)})}return s.$$set=c=>{"index"in c&&e(0,r=c.index),"total"in c&&e(1,o=c.total)},s.$$.update=()=>{s.$$.dirty&3&&e(3,t=r/o)},[r,o,i,t,a,p]}class Ie extends R{constructor(n){super();U(this,n,ke,ye,F,{index:0,total:1})}}function oe(s){let n,e,t;const l=[s[3][s[2]]];let r={};for(let o=0;o<l.length;o+=1)r=ge(r,l[o]);return e=new we({props:r}),{c(){n=b("div"),z(e.$$.fragment),this.h()},l(o){n=w(o,"DIV",{class:!0});var i=I(n);G(e.$$.fragment,i),i.forEach(_),this.h()},h(){E(n,"class","word svelte-x45xo9")},m(o,i){M(o,n,i),J(e,n,null),t=!0},p(o,i){const a=i&12?ue(l,[de(o[3][o[2]])]):{};e.$set(a)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){C(e.$$.fragment,o),t=!1},d(o){o&&_(n),Q(e)}}}function xe(s){let n;return{c(){n=B("Play")},l(e){n=j(e,"Play")},m(e,t){M(e,n,t)},d(e){e&&_(n)}}}function De(s){let n;return{c(){n=B("Stop")},l(e){n=j(e,"Stop")},m(e,t){M(e,n,t)},d(e){e&&_(n)}}}function Ee(s){let n,e,t,l,r,o,i,a,p,c,f,y,S,m,v,x,u,N,A,X;t=new Ie({props:{index:s[2],total:s[3].length}}),t.$on("change",s[8]);let h=s[3].length&&oe(s);function Y(d,D){return d[0]?De:xe}let H=Y(s),T=H(s);return{c(){n=b("div"),e=b("div"),z(t.$$.fragment),l=V(),r=b("label"),o=B("WPM: "),i=b("input"),a=V(),h&&h.c(),p=V(),c=b("div"),f=b("button"),y=B("<"),S=V(),m=b("button"),T.c(),v=V(),x=b("button"),u=B(">"),this.h()},l(d){n=w(d,"DIV",{class:!0});var D=I(n);e=w(D,"DIV",{class:!0});var k=I(e);G(t.$$.fragment,k),l=O(k),r=w(k,"LABEL",{class:!0});var q=I(r);o=j(q,"WPM: "),i=w(q,"INPUT",{}),q.forEach(_),a=O(k),h&&h.l(k),p=O(k),c=w(k,"DIV",{class:!0});var L=I(c);f=w(L,"BUTTON",{class:!0});var Z=I(f);y=j(Z,"<"),Z.forEach(_),S=O(L),m=w(L,"BUTTON",{class:!0});var $=I(m);T.l($),$.forEach(_),v=O(L),x=w(L,"BUTTON",{class:!0});var ee=I(x);u=j(ee,">"),ee.forEach(_),L.forEach(_),k.forEach(_),D.forEach(_),this.h()},h(){E(r,"class","speed svelte-x45xo9"),E(f,"class","control-btn svelte-x45xo9"),E(m,"class","control-btn svelte-x45xo9"),E(x,"class","control-btn svelte-x45xo9"),E(c,"class","controls svelte-x45xo9"),E(e,"class","flex svelte-x45xo9"),E(n,"class","root svelte-x45xo9")},m(d,D){M(d,n,D),g(n,e),J(t,e,null),g(e,l),g(e,r),g(r,o),g(r,i),ne(i,s[1]),g(e,a),h&&h.m(e,null),g(e,p),g(e,c),g(c,f),g(f,y),g(c,S),g(c,m),T.m(m,null),g(c,v),g(c,x),g(x,u),N=!0,A||(X=[W(window,"keydown",s[4]),W(i,"input",s[11]),W(f,"click",s[5]),W(m,"click",s[7]),W(x,"click",s[6])],A=!0)},p(d,[D]){const k={};D&4&&(k.index=d[2]),D&8&&(k.total=d[3].length),t.$set(k),D&2&&i.value!==d[1]&&ne(i,d[1]),d[3].length?h?(h.p(d,D),D&8&&P(h,1)):(h=oe(d),h.c(),P(h,1),h.m(e,p)):h&&(se(),C(h,1,1,()=>{h=null}),re()),H!==(H=Y(d))&&(T.d(1),T=H(d),T&&(T.c(),T.m(m,null)))},i(d){N||(P(t.$$.fragment,d),P(h),N=!0)},o(d){C(t.$$.fragment,d),C(h),N=!1},d(d){d&&_(n),Q(t),h&&h.d(),T.d(),A=!1,he(X)}}}function Ne(s){typeof localStorage!="undefined"&&localStorage.setItem("wordIndex",s.toString())}function Te(s,n,e){let t,{html:l=""}=n,{startIndex:r=0}=n,o=!1,i=400,a=r,p;function c(u,N){if(clearInterval(p),u){const A=60*1e3/N;p=setInterval(()=>{a<t.length-1&&e(2,a++,a)},A)}}function f(u){switch(u.key){case"ArrowLeft":u.preventDefault(),y();break;case"ArrowRight":u.preventDefault(),S();break;case" ":u.preventDefault(),m();break}}function y(){e(0,o=!1),a>0?e(2,a--,a):e(2,a=t.length-1)}function S(){e(0,o=!1),a<t.length-1?e(2,a++,a):e(2,a=0)}function m(){e(0,o=!o)}function v(u){console.log({progress:u.detail,index:Math.round(t.length*u.detail)});const N=Math.round(t.length*u.detail);console.log(`Setting ${N}`),e(2,a=Math.round(t.length*u.detail))}function x(){i=this.value,e(1,i)}return s.$$set=u=>{"html"in u&&e(9,l=u.html),"startIndex"in u&&e(10,r=u.startIndex)},s.$$.update=()=>{s.$$.dirty&512&&e(3,t=me(l)),s.$$.dirty&4&&Ne(a),s.$$.dirty&3&&c(o,i)},[o,i,a,t,f,y,S,m,v,l,r,x]}class Pe extends R{constructor(n){super();U(this,n,Te,Ee,F,{html:9,startIndex:10})}}function ae(s){let n,e;return n=new Pe({props:{html:s[0],startIndex:s[1]}}),{c(){z(n.$$.fragment)},l(t){G(n.$$.fragment,t)},m(t,l){J(n,t,l),e=!0},p(t,l){const r={};l&1&&(r.html=t[0]),l&2&&(r.startIndex=t[1]),n.$set(r)},i(t){e||(P(n.$$.fragment,t),e=!0)},o(t){C(n.$$.fragment,t),e=!1},d(t){Q(n,t)}}}function Se(s){let n,e,t=s[0]&&ae(s);return{c(){t&&t.c(),n=le()},l(l){t&&t.l(l),n=le()},m(l,r){t&&t.m(l,r),M(l,n,r),e=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&P(t,1)):(t=ae(l),t.c(),P(t,1),t.m(n.parentNode,n)):t&&(se(),C(t,1,1,()=>{t=null}),re())},i(l){e||(P(t),e=!0)},o(l){C(t),e=!1},d(l){t&&t.d(l),l&&_(n)}}}function Me(s,n,e){let t="",l=0;const r=new _e.Converter;return r.setOption("tables",!0),pe(async()=>{const o=await fetch("text.json").then(i=>i.text());localStorage.getItem("wordIndex")&&e(1,l=parseInt(localStorage.getItem("wordIndex"))),e(0,t=r.makeHtml(o))}),[t,l]}class je extends R{constructor(n){super();U(this,n,Me,Se,F,{})}}export{je as default};
